\chapter{Introduction}

While we keep building more and more complex programming languages, their type checkers are still often written in general purpose languages. This takes a lot of effort, and it is easy to make mistakes. Instead of writing the type checker in a general purpose language, in this thesis we will systematically derive a type checker from a high-level, declarative specification. A declarative specification defines what the semantics of the language are, rather than specifying the imperative steps to type check the language. This allows for a cleaner implementation that is easy to extend and maintain. 

In this thesis we will specifically focus on dependently typed languages, which differ from other languages because they allow types to be parameterized by values~\cite{lambda_cube}. This allows types to express properties of values that cannot be expressed in a simple type system, such as the length of a list or the well-formedness of a binary search tree. This expressiveness also makes dependent type systems more complicated to type check, since deciding equality of types requires evaluation of the terms they are parameterized by~\cite{Coquand_Huet_1988}. 

We will write the declarative specification in the Spoofax language workbench, which is a collection of tools that can derive a parser and type checker from a high level specification of the language~\cite{spoofax}. When working with the Spoofax workbench, the Statix meta-language can be used for the specification of static semantics~\cite{scopes_as_types}. It is a declarative language that uses inference rules and scope graphs~\cite{scope_graphs} to define static semantics. Statix aims to cover a broad range of languages and type systems. However, no attempts have been made yet to express a dependently typed language in Statix until now.
 

\section*{Contributions}
The primary contribution of this thesis is to investigate how well Statix is fit for the task of defining a dependently-typed language. The goal is not only to show that Statix can implement it, but also that the implementation is more concise than in a general purpose language. We will start by implementing the Calculus of Constructions~\cite{Coquand_Huet_1988}, a lambda calculus with dependent types, as this is one of the most simple dependently typed languages (chapter~\ref{chap:baselang}). 

However, this language is not very practical to write actual complex programs in, so to improve this situation we will extend the language with typical features of dependently typed languages. We will provide the following additional contributions:
\begin{itemize}
	\item We show the language is easily extendable, by extending it with booleans among other features (chapter~\ref{chap:bools}).
	\item We show how to add inference of implicit arguments to the implementation (chapter~\ref{ch:inference}).
	\item We show how to add support for inductive datatypes to the implementation (chapter~\ref{ch:datatypes}).
	\item We show how to add support for universes to the implementation (chapter~\ref{ch:universes}).
\end{itemize}

These contributions are important for two reasons. Firstly from the perspective of a Spoofax researcher, developing a language with a complex type system in Statix tests the boundaries of what Statix can do, and how Statix could be further improved to support these usecases better. On the other hand, from the perspective of a researcher in dependent type systems, if we can show that Statix provides a good way to quickly implement a dependently typed language, then Spoofax could help with rapid prototyping of dependently typed languages.

\section*{Discussions}

Furthermore, the thesis contains some discussions about the contributions:
\begin{itemize}
	\item We discuss how well semantic code completion, which is an editor service provided by Spoofax that completes holes in expressions, works for our language (chapter~\ref{chap:editor-services}).
	\item We compare our implementation with an implementation of the same language in Haskell (chapter~\ref{ch:comp-haskell}) and LambdaPi (chapter~\ref{ch:comp-lambdapi}).
	\item We discuss how Spoofax can be improved to better support implementing dependently typed languages (chapter~\ref{ch:ergonomics}).
	\item We discuss related work (chapter~\ref{ch:relatedwork}) and future work (chapter~\ref{ch:conclusion}).
\end{itemize}

\noindent Before explaining these contributions, we provide background information on Spoofax and Statix (chapter~\ref{chap:bg-dp}) and the Calculus of Constructions (chapter~\ref{chap:bg-spoofax}).

The source code for this thesis can be found online \\ \url{https://github.com/JonathanBrouwer/master-thesis}.

